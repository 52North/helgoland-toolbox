<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>helgoland-toolbox documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">helgoland-toolbox documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>FacetSearchService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/helgoland/facet-search/src/lib/facet-search.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#facets">facets</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#filteredTimeseries">filteredTimeseries</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#onResultsChanged">onResultsChanged</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#selectedTimspan">selectedTimspan</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#timeseries">timeseries</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addParameter">addParameter</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#checkFacet">checkFacet</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#checkSelection">checkSelection</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#checkTimespan">checkTimespan</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#createTimespan">createTimespan</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getCompleteTimespan">getCompleteTimespan</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getCurrentTimespan">getCurrentTimespan</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getFilteredResults">getFilteredResults</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getParameterList">getParameterList</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getResults">getResults</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#selectParameter">selectParameter</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#setCurrentTimespan">setCurrentTimespan</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setFilteredTimeseries">setFilteredTimeseries</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#setTimeseries">setTimeseries</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#sortParameters">sortParameters</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:20</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addParameter"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            addParameter
                        </b>
                        <a href="#addParameter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addParameter(list: FacetParameter[], type: <a href="../interfaces/Parameter.html">ParameterFacetType</a>, entry: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="145"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:145</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>list</td>
                                    <td>
                                            <code>FacetParameter[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>entry</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkFacet"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            checkFacet
                        </b>
                        <a href="#checkFacet"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkFacet(type: <a href="../interfaces/Parameter.html">ParameterFacetType</a>, parameter: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="121"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:121</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>parameter</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkSelection"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            checkSelection
                        </b>
                        <a href="#checkSelection"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkSelection(type: <a href="../interfaces/Parameter.html">ParameterFacetType</a>, entry: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="158"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:158</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>entry</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="checkTimespan"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            checkTimespan
                        </b>
                        <a href="#checkTimespan"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>checkTimespan(ts: <a href="../injectables/Time.html">Timeseries</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="113"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:113</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ts</td>
                                    <td>
                                                <code><a href="../injectables/Time.html" target="_self" >Timeseries</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createTimespan"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            createTimespan
                        </b>
                        <a href="#createTimespan"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createTimespan(timeseriesList: <a href="../injectables/Time.html">Timeseries[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="84"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:84</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>timeseriesList</td>
                                    <td>
                                                <code><a href="../injectables/Time.html" target="_self" >Timeseries[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/Time.html" target="_self" >Timespan</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCompleteTimespan"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getCompleteTimespan
                        </b>
                        <a href="#getCompleteTimespan"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCompleteTimespan()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="68"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:68</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/Time.html" target="_self" >Timespan</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCurrentTimespan"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getCurrentTimespan
                        </b>
                        <a href="#getCurrentTimespan"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCurrentTimespan()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="77"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:77</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/Time.html" target="_self" >Timespan</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFilteredResults"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getFilteredResults
                        </b>
                        <a href="#getFilteredResults"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getFilteredResults()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="64"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:64</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/Time.html" target="_self" >Timeseries[]</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getParameterList"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getParameterList
                        </b>
                        <a href="#getParameterList"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getParameterList(type: <a href="../interfaces/Parameter.html">ParameterFacetType</a>, sort: <a href="../interfaces/Parameter.html">ParameterFacetSort</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="33"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:33</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>sort</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetSort</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>FacetParameter[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getResults"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            getResults
                        </b>
                        <a href="#getResults"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getResults()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="29"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:29</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../injectables/Time.html" target="_self" >Observable&lt;Timeseries[]&gt;</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectParameter"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            selectParameter
                        </b>
                        <a href="#selectParameter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>selectParameter(type: <a href="../interfaces/Parameter.html">ParameterFacetType</a>, parameter: <a href="../interfaces/FacetParameter.html">FacetParameter</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="55"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:55</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>type</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>parameter</td>
                                    <td>
                                                <code><a href="../interfaces/FacetParameter.html" target="_self" >FacetParameter</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setCurrentTimespan"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            setCurrentTimespan
                        </b>
                        <a href="#setCurrentTimespan"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setCurrentTimespan(timespan: <a href="../injectables/Time.html">Timespan</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="72"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:72</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>timespan</td>
                                    <td>
                                                <code><a href="../injectables/Time.html" target="_self" >Timespan</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setFilteredTimeseries"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            setFilteredTimeseries
                        </b>
                        <a href="#setFilteredTimeseries"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setFilteredTimeseries()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="96"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:96</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setTimeseries"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            setTimeseries
                        </b>
                        <a href="#setTimeseries"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setTimeseries(ts: <a href="../injectables/Time.html">Timeseries[]</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="24"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:24</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ts</td>
                                    <td>
                                                <code><a href="../injectables/Time.html" target="_self" >Timeseries[]</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="sortParameters"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            sortParameters
                        </b>
                        <a href="#sortParameters"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>sortParameters(list: FacetParameter[], sort: <a href="../interfaces/Parameter.html">ParameterFacetSort</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="128"
                            class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:128</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>list</td>
                                    <td>
                                            <code>FacetParameter[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>sort</td>
                                    <td>
                                                <code><a href="../interfaces/Parameter.html" target="_self" >ParameterFacetSort</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>FacetParameter[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="facets"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            facets</b>
                            <a href="#facets"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../miscellaneous/enumerations.html#ParameterFacetType" target="_self" >Map&lt;ParameterFacetType | FacetParameter&gt;</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Map()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:14</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="filteredTimeseries"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            filteredTimeseries</b>
                            <a href="#filteredTimeseries"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../injectables/Time.html" target="_self" >Timeseries[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="20" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:20</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="onResultsChanged"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            onResultsChanged</b>
                            <a href="#onResultsChanged"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../injectables/Time.html" target="_self" >ReplaySubject&lt;Timeseries[]&gt;</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new ReplaySubject(1)</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="12" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:12</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selectedTimspan"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            selectedTimspan</b>
                            <a href="#selectedTimspan"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../injectables/Time.html" target="_self" >Timespan</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:18</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="timeseries"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            timeseries</b>
                            <a href="#timeseries"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../injectables/Time.html" target="_self" >Timeseries[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">projects/helgoland/facet-search/src/lib/facet-search.service.ts:16</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Timeseries, Timespan } from &#x27;@helgoland/core&#x27;;
import { Observable, ReplaySubject } from &#x27;rxjs&#x27;;

import { FacetParameter, FacetSearch, ParameterFacetSort, ParameterFacetType } from &#x27;./facet-search-model&#x27;;

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class FacetSearchService implements FacetSearch {

  private onResultsChanged: ReplaySubject&lt;Timeseries[]&gt; &#x3D; new ReplaySubject(1);

  private facets: Map&lt;ParameterFacetType, FacetParameter&gt; &#x3D; new Map();

  private timeseries: Timeseries[];

  private selectedTimspan: Timespan;

  private filteredTimeseries: Timeseries[];

  constructor() { }

  public setTimeseries(ts: Timeseries[]) {
    this.timeseries &#x3D; ts;
    this.setFilteredTimeseries();
  }

  public getResults(): Observable&lt;Timeseries[]&gt; {
    return this.onResultsChanged.asObservable();
  }

  public getParameterList(type: ParameterFacetType, sort: ParameterFacetSort): FacetParameter[] {
    const params &#x3D; [];
    switch (type) {
      case ParameterFacetType.category:
        this.filteredTimeseries.forEach(e &#x3D;&gt; this.addParameter(params, ParameterFacetType.category, e.parameters.category.label));
        break;
      case ParameterFacetType.feature:
        this.filteredTimeseries.forEach(e &#x3D;&gt; this.addParameter(params, ParameterFacetType.feature, e.parameters.feature.label));
        break;
      case ParameterFacetType.offering:
        this.filteredTimeseries.forEach(e &#x3D;&gt; this.addParameter(params, ParameterFacetType.offering, e.parameters.offering.label));
        break;
      case ParameterFacetType.phenomenon:
        this.filteredTimeseries.forEach(e &#x3D;&gt; this.addParameter(params, ParameterFacetType.phenomenon, e.parameters.phenomenon.label));
        break;
      case ParameterFacetType.procedure:
        this.filteredTimeseries.forEach(e &#x3D;&gt; this.addParameter(params, ParameterFacetType.procedure, e.parameters.procedure.label));
        break;
    }
    return this.sortParameters(params, sort);
  }

  public selectParameter(type: ParameterFacetType, parameter: FacetParameter) {
    if (parameter.selected) {
      this.facets.set(type, parameter);
    } else {
      this.facets.delete(type);
    }
    this.setFilteredTimeseries();
  }

  public getFilteredResults(): Timeseries[] {
    return this.filteredTimeseries;
  }

  public getCompleteTimespan(): Timespan {
    return this.createTimespan(this.timeseries);
  }

  public setCurrentTimespan(timespan: Timespan) {
    this.selectedTimspan &#x3D; timespan;
    this.setFilteredTimeseries();
  }

  public getCurrentTimespan(): Timespan {
    if (this.selectedTimspan) {
      return this.selectedTimspan;
    }
    return this.createTimespan(this.filteredTimeseries);
  }

  private createTimespan(timeseriesList: Timeseries[]): Timespan {
    let timespan: Timespan &#x3D; null;
    if (timeseriesList.length &gt; 0) {
      timespan &#x3D; { from: Infinity, to: 0 };
      timeseriesList.forEach(e &#x3D;&gt; {
        if (e.firstValue.timestamp &lt; timespan.from) { timespan.from &#x3D; e.firstValue.timestamp; }
        if (e.lastValue.timestamp &gt; timespan.to) { timespan.to &#x3D; e.lastValue.timestamp; }
      });
    }
    return timespan;
  }

  private setFilteredTimeseries() {
    if (this.facets.size &gt; 0 || this.selectedTimspan) {
      this.filteredTimeseries &#x3D; this.timeseries.filter(e &#x3D;&gt; {
        const matchCategory &#x3D; this.checkFacet(ParameterFacetType.category, e.parameters.category.label);
        const matchFeature &#x3D; this.checkFacet(ParameterFacetType.feature, e.parameters.feature.label);
        const matchOffering &#x3D; this.checkFacet(ParameterFacetType.offering, e.parameters.offering.label);
        const matchPhenomenon &#x3D; this.checkFacet(ParameterFacetType.phenomenon, e.parameters.phenomenon.label);
        const matchProcedure &#x3D; this.checkFacet(ParameterFacetType.procedure, e.parameters.procedure.label);
        const matchTimespan &#x3D; this.checkTimespan(e);
        return matchCategory &amp;&amp; matchFeature &amp;&amp; matchOffering &amp;&amp; matchPhenomenon &amp;&amp; matchProcedure &amp;&amp; matchTimespan;
      });
    } else {
      this.filteredTimeseries &#x3D; this.timeseries;
    }
    this.onResultsChanged.next(this.filteredTimeseries);
  }

  private checkTimespan(ts: Timeseries): boolean {
    if (this.selectedTimspan) {
      const checkfrom &#x3D; this.selectedTimspan.from &lt;&#x3D; ts.lastValue.timestamp &amp;&amp; this.selectedTimspan.to &gt;&#x3D; ts.firstValue.timestamp;
      return checkfrom;
    }
    return true;
  }

  private checkFacet(type: ParameterFacetType, parameter: string): boolean {
    if (this.facets.has(type)) {
      return parameter &#x3D;&#x3D;&#x3D; this.facets.get(type).label;
    }
    return true;
  }

  private sortParameters(list: FacetParameter[], sort: ParameterFacetSort): FacetParameter[] {
    if (sort &#x3D;&#x3D;&#x3D; null || sort &#x3D;&#x3D;&#x3D; ParameterFacetSort.none) { return list; }
    list.sort((a, b) &#x3D;&gt; {
      switch (sort) {
        case ParameterFacetSort.ascCount:
          return a.count - b.count;
        case ParameterFacetSort.descCount:
          return b.count - a.count;
        case ParameterFacetSort.ascAlphabet:
          return b.label &lt; a.label ? 1 : -1;
        case ParameterFacetSort.descAlphabet:
          return b.label &gt; a.label ? 1 : -1;
      }
    });
    return list;
  }

  private addParameter(list: FacetParameter[], type: ParameterFacetType, entry: string) {
    const existing &#x3D; list.find(e &#x3D;&gt; e.label &#x3D;&#x3D;&#x3D; entry);
    if (existing) {
      existing.count +&#x3D; 1;
    } else {
      list.push({
        label: entry,
        count: 1,
        selected: this.checkSelection(type, entry)
      });
    }
  }

  private checkSelection(type: ParameterFacetType, entry: string): boolean {
    return this.facets.has(type) &amp;&amp; this.facets.get(type).label &#x3D;&#x3D;&#x3D; entry;
  }

}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'FacetSearchService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
