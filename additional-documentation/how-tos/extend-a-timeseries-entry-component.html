<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>helgoland-toolbox documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">
	      <link rel="stylesheet" href="../../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../../" class="navbar-brand">helgoland-toolbox documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">














                   




<h1 id="how-to-extend-a-timeseries-entry-component">How to extend a timeseries entry component</h1>
<p>This tutorial gives a stepwise instruction on how extend a timeseries entry component with a new html-template. This tutorial can be used as a follow up of <a href="./integrate-a-d3-timeseries-component.html">Integrate a D3 timeseries component</a>.</p>
<h2 id="step-1-preparation-to-add-new-components">Step 1: Preparation to add new components</h2>
<ul>
<li><p>add <code>scss</code> support</p>
<ul>
<li>adjust in <code>.angular-cli.json</code> the parameter <code>defaults.styleExt</code> from <code>css</code> to <code>scss</code></li>
</ul>
</li>
<li><p>restucture of the view to have two other divs beside the diagram</p>
<ul>
<li>change <code>app.component.html</code> to <div><pre class="line-numbers"><code class="language-none">```html
&lt;div class=&quot;diagram&quot;&gt;
    &lt;n52-d3-timeseries-graph [datasetIds]=&quot;datasetIdsMultiple&quot; [selectedDatasetIds]=&quot;selectedIds&quot; [datasetOptions]=&quot;datasetOptionsMultiple&quot; [timeInterval]=&quot;timespan&quot; (onTimespanChanged)=&quot;timespanChanged($event)&quot; [graphOptions]=&quot;diagramOptionsD3&quot;&gt;&lt;/n52-d3-timeseries-graph&gt;
&lt;/div&gt;
&lt;div class=&quot;bottom&quot;&gt;
    &lt;div class=&quot;left&quot;&gt;
        &lt;!-- here comes the common timeseries entry component --&gt;
    &lt;/div&gt;
    &lt;div class=&quot;right&quot;&gt;
        &lt;!-- here comes the extended timeseries entry component --&gt;
    &lt;/div&gt;
&lt;/div&gt;
```</code></pre></div></li>
<li>rename <code>app.component.css</code> to <code>app.component.scss</code> and adjust it to<div><pre class="line-numbers"><code class="language-none">```scss
:host {
    .diagram {
        height: 500px;
        flex: 1;
    }
    .bottom {
        display: flex;
        flex-direction: row;
        .left,
        .right {
            width: 50%;
        }
    }
}
```</code></pre></div></li>
<li>adjust the import of the styles in <code>app.component.ts</code> to <code>app.component.scss</code></li>
</ul>
</li>
</ul>
<h2 id="step-2-add-existing-timeseries-entry-component-to-app">Step 2: Add existing timeseries entry component to app</h2>
<ul>
<li><p>install <code>@helgoland/depiction</code> add <code>HelgolandDatasetlistModule</code> to import</p>
<ul>
<li>do a<div><pre class="line-numbers"><code class="language-none">```bash
npm i &#64;helgoland/depiction
```</code></pre></div></li>
<li>add <code>HelgolandDatasetlistModule</code> in <code>app.modul.ts</code> to the import list therefor you need to import it:<div><pre class="line-numbers"><code class="language-none">```typescript
import { HelgolandDatasetlistModule } from &#39;&#64;helgoland/depiction&#39;;
```</code></pre></div></li>
<li>please check if you use at least typescript v2.6 or greater, otherwise install it with: <div><pre class="line-numbers"><code class="language-none">```bash
npm i typescript&#64;~2.6
```</code></pre></div></li>
</ul>
</li>
<li><p>add <code>SettingsService</code> to provider</p>
<ul>
<li>create an Injectable <code>ExtendedSettingsService</code> which will extend a <code>SettingsService</code> in your project and add the missing imports (<code>SettingsService</code>, <code>Settings</code> of <code>@helgoland/core</code> and <code>Injectable</code> of <code>@angular/core</code>)<div><pre class="line-numbers"><code class="language-none">```typescript
&#64;Injectable()
export class ExtendedSettingsService extends SettingsService&lt;Settings&gt; {
    constructor() {
        super();
        this.setSettings({
        // TODO add settings here or load it from somewhere else...
        });
    }
}
```</code></pre></div></li>
<li>add this <code>ExtendedSettingsService</code> in the list of the providers <div><pre class="line-numbers"><code class="language-none">```typescript
{
    provide: SettingsService,
    useClass: ExtendedSettingsService
}
```</code></pre></div></li>
</ul>
</li>
<li><p>add <code>n52-timeseries-entry</code> to <code>app.component.html</code> (integrate this in the previous created div with the class <code>left</code>)</p>
<div><pre class="line-numbers"><code class="language-html">  &lt;div&gt;Common timeseries entries&lt;/div&gt;
  &lt;div *ngFor=&quot;let id of datasetIdsMultiple&quot;&gt;
      &lt;n52-timeseries-entry [datasetId]=&quot;id&quot; [selected]=&quot;isSelected(id)&quot; [datasetOptions]=&quot;datasetOptionsMultiple.get(id)&quot; [timeInterval]=&quot;timespan&quot; (onSelectDataset)=&quot;selectDataset($event, id)&quot;&gt;&lt;/n52-timeseries-entry&gt;
  &lt;/div&gt;</code></pre></div></li>
<li><p>add <code>selectDataset</code>-method to <code>AppComponent</code> class (handles the selection of a dataset triggered inside the timeseries-entry-component)</p>
<div><pre class="line-numbers"><code class="language-typescript">  public selectDataset(selected: boolean, id: string) {
      if (selected) {
          this.selectedIds.push(id);
      } else {
          this.selectedIds.splice(this.selectedIds.findIndex((entry) =&gt; entry === id), 1);
      }
  }</code></pre></div></li>
<li><p>add <code>isSelected</code>-method to <code>AppComponent</code> class (informs the timeseries-entry-component, if the dataset is selected)</p>
<div><pre class="line-numbers"><code class="language-typescript">  public isSelected(id: string) {
      return this.selectedIds.indexOf(id) &gt; -1;
  }</code></pre></div></li>
<li><p>with a <code>ng serve</code> you should see now the diagram and the listed timeseries entries, by clicking an entry you can highligh it in the diagram</p>
</li>
</ul>
<h2 id="step-3-extend-timeseries-entry-with-new-template">Step 3: Extend timeseries entry with new template</h2>
<ul>
<li>add angular-material in version 5 (see also the <a href="https://v5.material.angular.io/guide/getting-started">here</a>)<ul>
<li>install<div><pre class="line-numbers"><code class="language-none">```bash
npm i &#64;angular/cdk&#64;^5.0.0 &#64;angular/material&#64;^5.0.0
```</code></pre></div></li>
<li>adjust <code>app.module.ts</code> with <code>MatCardModule</code> and <code>MatButtonModule</code> in the import list and import them from <code>@angular/material</code></li>
<li>add a style sheet to <code>styles.scss</code><div><pre class="line-numbers"><code class="language-none">```css
&#64;import &quot;~&#64;angular/material/prebuilt-themes/indigo-pink.css&quot;;
```</code></pre></div></li>
</ul>
</li>
<li>create new component <code>ExtendedTimeseriesEntryComponent</code> - this will generate a component with a basic template an style sheet. The component is also added to the <code>app.module.ts</code> to the <code>declarations</code> list<div><pre class="line-numbers"><code class="language-bash">  ng generate component extended-timeseries</code></pre></div><ul>
<li>adjust <code>extended-timeseries.component.html</code> to <div><pre class="line-numbers"><code class="language-none">```html
&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;mat-card class=&quot;example-card&quot;&gt;
        &lt;mat-card-header&gt;
            &lt;div mat-card-avatar [ngStyle]=&quot;{&#39;background-color&#39;: datasetOptions.color}&quot; (click)=&quot;changeColor();&quot;&gt;&lt;/div&gt;
            &lt;mat-card-title&gt;{{phenomenonLabel}} - {{uom}}&lt;/mat-card-title&gt;
            &lt;mat-card-subtitle&gt;{{platformLabel}}&lt;/mat-card-subtitle&gt;
        &lt;/mat-card-header&gt;
        &lt;mat-card-actions&gt;
            &lt;button mat-button (click)=&quot;toggleSelection()&quot;&gt;Highlight&lt;/button&gt;
        &lt;/mat-card-actions&gt;
    &lt;/mat-card&gt;
&lt;/div&gt;
```</code></pre></div></li>
<li>adjust <code>extended-timeseries.component.ts</code><div><pre class="line-numbers"><code class="language-typescript">export class ExtendedTimeseriesComponent extends TimeseriesEntryComponent {
    public changeColor() {
        this.datasetOptions.color = this.color.getColor();
        this.onUpdateOptions.emit(this.datasetOptions);
    }
}</code></pre></div></li>
</ul>
</li>
</ul>
<h2 id="step-4-add-new-timeseries-entry-component-to-app">Step 4: Add new timeseries entry component to app</h2>
<ul>
<li>add new component <code>app-extended-timeseries</code> to <code>app.component.html</code> (integrate this in the previous created div with the class <code>right</code>)<div><pre class="line-numbers"><code class="language-html">  &lt;div&gt;Extended timeseries entries&lt;/div&gt;
  &lt;div *ngFor=&quot;let id of datasetIdsMultiple&quot;&gt;
      &lt;app-extended-timeseries [datasetId]=&quot;id&quot; [selected]=&quot;isSelected(id)&quot; [datasetOptions]=&quot;datasetOptionsMultiple.get(id)&quot; [timeInterval]=&quot;timespan&quot; (onSelectDataset)=&quot;selectDataset($event, id)&quot; (onUpdateOptions)=&quot;updateOptions($event, id)&quot;&gt;
      &lt;/app-extended-timeseries&gt;
  &lt;/div&gt;</code></pre></div></li>
<li>add <code>updateOptions</code>-method to AppComponent class (this method is bound with the <code>app-extended-timeseries</code> component and reacts on dataset option changes)<div><pre class="line-numbers"><code class="language-typescript">  public updateOptions(option: DatasetOptions, id: string) {
      this.datasetOptionsMultiple.set(id, option);
  }</code></pre></div></li>
</ul>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 2;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'extend-a-timeseries-entry-component.html';
       </script>

       <script src="../../js/libs/custom-elements.min.js"></script>
       <script src="../../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../../js/menu-wc.js" defer></script>

       <script src="../../js/libs/bootstrap-native.js"></script>

       <script src="../../js/libs/es6-shim.min.js"></script>
       <script src="../../js/libs/EventDispatcher.js"></script>
       <script src="../../js/libs/promise.min.js"></script>
       <script src="../../js/libs/zepto.min.js"></script>

       <script src="../../js/compodoc.js"></script>

       <script src="../../js/tabs.js"></script>
       <script src="../../js/menu.js"></script>
       <script src="../../js/libs/clipboard.min.js"></script>
       <script src="../../js/libs/prism.js"></script>
       <script src="../../js/sourceCode.js"></script>
          <script src="../../js/search/search.js"></script>
          <script src="../../js/search/lunr.min.js"></script>
          <script src="../../js/search/search-lunr.js"></script>
          <script src="../../js/search/search_index.js"></script>
       <script src="../../js/lazy-load-graphs.js"></script>


    </body>
</html>
