<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>helgoland-toolbox documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../../images/favicon.ico">
	      <link rel="stylesheet" href="../../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../../" class="navbar-brand">helgoland-toolbox documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content additional-page">
                   <div class="content-data">














                   




<h1 id="how-to-integrate-a-table-component">How to integrate a table component</h1>
<p>In this tutorial a stepwise instruction will be given on how to integrate a table component into an angular app (ng-app).</p>
<p>A quite similar code is integrated in the helgoland-toolbox github repository and can be viewed <a href="https://github.com/52North/helgoland-toolbox/tree/master/src/demo/app/pages/table">here</a>.</p>
<p>First initialize an app as described in the prepare section <a href="../how-tos.html">here</a> or integrate this component in an existing project.</p>
<h2 id="step-1-import-helgoland-dependencies">Step 1: import helgoland dependencies</h2>
<p>To start working with the table component a few dependencies are needed: <a href="https://www.npmjs.com/package/@helgoland/depiction">helgoland-depiction</a> and <a href="https://www.npmjs.com/package/@helgoland/core">helgoland-core</a> are necessary to provide the table component. For translations <a href="http://www.ngx-translate.com/">ngx-translate</a> is used and the <a href="https://www.npmjs.com/package/@ngx-translate/http-loader">ngx-translate-http-loader</a> will load the translations.</p>
<table class="table table-bordered compodoc-table">
<thead>
<tr>
<th>Install dependencies</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>npm i @helgoland/core</code></td>
</tr>
<tr>
<td><code>npm i @helgoland/depiction</code></td>
</tr>
<tr>
<td><code>npm i @ngx-translate/http-loader</code></td>
</tr>
</tbody>
</table>
<p>Import dependencies to your ng-app by adding the following javascript code to <code>src/app/app.module.ts</code>:</p>
<div><pre class="line-numbers"><code class="language-javascript">// Add dependencies for helgoland components.
import { HelgolandDatasetTableModule } from &#39;&#64;helgoland/depiction/dataset-table&#39;;
import { DatasetApiInterface, SplittedDataDatasetApiInterface } from &#39;&#64;helgoland/core&#39;;

// Add dependencies for translations.
import { HttpClient } from &#39;&#64;angular/common/http&#39;;
import { TranslateLoader, TranslateModule } from &#39;&#64;ngx-translate/core&#39;;
import { TranslateHttpLoader } from &#39;&#64;ngx-translate/http-loader&#39;;</code></pre></div><p>Another step is to add the dependencies correctly to the <code>@NgModule</code>. As imports we will define the <code>TranslateModule</code> and the <code>HelgolandDatasetTableModule</code> and as providers we need to take the <code>DatasetApiInterface</code> with the <code>SplittedDataDatasetApiInterface</code> as <code>useClass</code>. To use the translation functions we will add a function called <code>HttpLoaderFactory</code> which is to be exported.
You can compare your <code>src/app/app.module.ts</code> file with the following code below:</p>
<div><pre class="line-numbers"><code class="language-javascript">&#64;NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule,
    TranslateModule.forRoot({
      loader: {
        provide: TranslateLoader,
        useFactory: HttpLoaderFactory,
        deps: [HttpClient]
      }
    }),
    HelgolandDatasetTableModule
  ],
  providers: [
    {
      provide: DatasetApiInterface,
      useClass: SplittedDataDatasetApiInterface
    }
  ],
  bootstrap: [AppComponent]
})
export class AppModule { }

export function HttpLoaderFactory(http: HttpClient) {
  return new TranslateHttpLoader(http);
}</code></pre></div><h3 id="suggestions-for-error-handling">Suggestions for error handling</h3>
<ul>
<li><code>Cannot find namespace &#39;GeoJSON&#39;</code> see below</li>
</ul>
<p>By manually adapting the configuration in <code>src/tsconfig.app.js</code> this issue should be solved. But to let the changes be accepted, the app has to be restarted (by executing <code>ng serve</code>). Add to the types-array the type <code>geojson</code> which then should look like this:</p>
<div><pre class="line-numbers"><code class="language-json">{
  &quot;extends&quot;: &quot;../tsconfig.json&quot;,
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;../out-tsc/app&quot;,
    &quot;baseUrl&quot;: &quot;./&quot;,
    &quot;module&quot;: &quot;es2015&quot;,
    &quot;types&quot;: [&quot;geojson&quot;]
  },
  &quot;exclude&quot;: [
    &quot;test.ts&quot;,
    &quot;**/*.spec.ts&quot;
  ]
}</code></pre></div><h2 id="step-2-add-code">Step 2: add code</h2>
<p>Now we will integrate the directive of the table component. Implement the directive of the table by replacing all of <code>src/app/app.component.html</code> with the following code. All fields in the <code>n52-dataset-table</code>-directive are required to provide options, datasets and other information.</p>
<div><pre class="line-numbers"><code class="language-html">&lt;n52-dataset-table [datasetIds]=&quot;datasetIds&quot; [timeInterval]=&quot;timespan&quot; [datasetOptions]=&quot;datasetOptions&quot;&gt;&lt;/n52-dataset-table&gt;</code></pre></div><p>Implement the parameter for the <code>n52-dataset-table</code>-directive by adding the following code to the class <code>AppComponent</code> in <code>src/app/app.component.ts</code>:</p>
<div><pre class="line-numbers"><code class="language-javascript">// defines the dataset by internal id structure
public datasetIds = [
  &#39;http://sensorweb.demo.52north.org/sensorwebtestbed/api/v1/__95&#39;,
  &#39;http://sensorweb.demo.52north.org/sensorwebtestbed/api/v1/__96&#39;,
  &#39;https://geo.irceline.be/sos/api/v1/__6941&#39;,
  &#39;http://sensorweb.demo.52north.org/sensorwebtestbed/api/v1/__97&#39;
];

// defines the timeframe for which data should be fetched
public timespan = new Timespan(
  new Date(&#39;2017-10-24T01:49:59.000Z&#39;).getTime(),
  new Date(&#39;2017-10-25T01:49:59.000Z&#39;).getTime()
);

// defines the datasetOptions, where the color can be set
public datasetOptions: Map&lt;string, DatasetOptions&gt; = new Map();

constructor() {
  let i = 0;
  // sets the color to the datasetOptions
  const colors = [&#39;firebrick&#39;, &#39;yellow&#39;, &#39;darkgreen&#39;, &#39;lightblue&#39;];
  this.datasetIds.forEach((entry) =&gt; {
    this.datasetOptions.set(entry, new DatasetOptions(entry, colors[i++]));
  });
}</code></pre></div><p>This code is implemented in the helgoland-toolbox github repository and can be viewed <a href="https://github.com/52North/helgoland-toolbox/blob/master/src/demo/app/pages/timeseries-graph/timeseries-graph.component.ts">here</a>.</p>
<p><strong>A very important step should not be missed</strong><br>To use the functionality of the functions in the <code>src/app/app.component.ts</code> we need to add the dependencies to use for example <code>DatasetOptions</code> and <code>Timespan</code>. This is done by using the following imports:</p>
<div><pre class="line-numbers"><code class="language-javascript">import { DatasetOptions, Timespan } from &#39;&#64;helgoland/core&#39;;</code></pre></div><h3 id="suggestions-for-error-handling-1">Suggestions for error handling</h3>
<ul>
<li><code>error TS2307: Cannot find module &#39;@helgoland/depiction/dataset-table&#39;.</code> Please upgrade the <code>typescript</code> dependency to a least <code>2.6.0</code> by <code>npm i typescript@~2.6</code></li>
</ul>
<h2 id="step-3-start-working">Step 3: start working</h2>
<p>Now, that we have added all dependencies and the code to access the functionality of the table component you can start working on your app. If you did not run the app while following this tutorial you should now see the dataset table by starting your app with <code>ng serve</code>.</p>

                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 2;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'additional-page';
            var COMPODOC_CURRENT_PAGE_URL = 'integrate-a-table-component.html';
       </script>

       <script src="../../js/libs/custom-elements.min.js"></script>
       <script src="../../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../../js/menu-wc.js" defer></script>

       <script src="../../js/libs/bootstrap-native.js"></script>

       <script src="../../js/libs/es6-shim.min.js"></script>
       <script src="../../js/libs/EventDispatcher.js"></script>
       <script src="../../js/libs/promise.min.js"></script>
       <script src="../../js/libs/zepto.min.js"></script>

       <script src="../../js/compodoc.js"></script>

       <script src="../../js/tabs.js"></script>
       <script src="../../js/menu.js"></script>
       <script src="../../js/libs/clipboard.min.js"></script>
       <script src="../../js/libs/prism.js"></script>
       <script src="../../js/sourceCode.js"></script>
          <script src="../../js/search/search.js"></script>
          <script src="../../js/search/lunr.min.js"></script>
          <script src="../../js/search/search-lunr.js"></script>
          <script src="../../js/search/search_index.js"></script>
       <script src="../../js/lazy-load-graphs.js"></script>


    </body>
</html>
